//you do not nned this file until you are using a server for back-end
import fs from "fs";
import path from "path";
import process from "process";
import express from "express";

const app = express();
const globalPath = `${process.cwd()}${path.sep}`

app.use("/.github", express.static(`${globalPath}.github`));
app.use("/css", express.static(`${globalPath}css`));
app.use("/js", express.static(`${globalPath}js`));

app.get("/", (req, res, next) => {
    res.sendFile(`${globalPath}index.html`);
});

app.get("/search", (req, res, next) => {
    res.sendFile(`${globalPath}search.html`);
});

app.get("/blog/:blog", (req, res, next) => {
    const folder = fs.readdirSync("blog");
    if (folder.includes(req.params.blog + ".html")) return res.sendFile(`${globalPath}blog${path.sep}${req.params.blog}.html`);
    else res.redirect("/404");
});

app.get("/secret", (req, res, next) => {
    res.sendFile(`${globalPath}secret.html`);
});

app.get("/404", (req, res, next) => {
    res.sendFile(`${globalPath}404.html`);
});

app.get("*", (req, res, next) => {
    res.redirect("/404");
});

app.listen(3000, (f) => {
    console.log("Testing server ready as http://localhost:3000/!");
});